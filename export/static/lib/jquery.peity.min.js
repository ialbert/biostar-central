// Peity jQuery plugin version 3.1.0
// (c) 2015 Ben Pickles
//
// http://benpickles.github.io/peity
//
// Released under MIT license.
(function(k,x,g,v){var p=function(a,b){return k(x.createElementNS("http://www.w3.org/2000/svg",a)).attr(b)},z="createElementNS"in x&&p("svg",{})[0].createSVGRect,d=k.fn.peity=function(a,b){z&&this.each(function(){var e=k(this),c=e.data("_peity");c?(a&&(c.type=a),k.extend(c.opts,b)):(c=new y(e,a,k.extend({},d.defaults[a],e.data("peity"),b)),e.change(function(){c.draw()}).data("_peity",c));c.draw()});return this},y=function(a,b,e){this.$el=a;this.type=b;this.opts=e},w=y.prototype;w.draw=function(){d.graphers[this.type].call(this,
this.opts)};w.fill=function(){var a=this.opts.fill;return k.isFunction(a)?a:function(b,e){return a[e%a.length]}};w.prepare=function(a,b){this.$svg||this.$el.hide().after(this.$svg=p("svg",{"class":"peity"}));return this.$svg.empty().data("peity",this).attr({height:b,width:a})};w.values=function(){return k.map(this.$el.text().split(this.opts.delimiter),function(a){return parseFloat(a)})};d.defaults={};d.graphers={};d.register=function(a,b,e){this.defaults[a]=b;this.graphers[a]=e};d.register("pie",
{fill:["#ff9900","#fff4dd","#ffc66e"],radius:8},function(a){if(!a.delimiter){var b=this.$el.text().match(/[^0-9\.]/);a.delimiter=b?b[0]:","}b=k.map(this.values(),function(a){return 0<a?a:0});if("/"==a.delimiter)var e=b[0],b=[e,g.max(0,b[1]-e)];for(var c=0,e=b.length,s=0;c<e;c++)s+=b[c];s||(e=2,s=1,b=[0,1]);for(var l=2*a.radius,l=this.prepare(a.width||l,a.height||l),c=l.width(),h=l.height(),j=c/2,d=h/2,h=g.min(j,d),a=a.innerRadius,q=g.PI,r=this.fill(),f=this.scale=function(a,b){var c=a/s*q*2-q/2;return[b*
g.cos(c)+j,b*g.sin(c)+d]},m=0,c=0;c<e;c++){var t=b[c],i=t/s;if(0!=i){if(1==i)if(a)var i=j-0.01,o=d-h,n=d-a,i=p("path",{d:["M",j,o,"A",h,h,0,1,1,i,o,"L",i,n,"A",a,a,0,1,0,j,n].join(" ")});else i=p("circle",{cx:j,cy:d,r:h});else o=m+t,n=["M"].concat(f(m,h),"A",h,h,0,0.5<i?1:0,1,f(o,h),"L"),a?n=n.concat(f(o,a),"A",a,a,0,0.5<i?1:0,0,f(m,a)):n.push(j,d),m+=t,i=p("path",{d:n.join(" ")});i.attr("fill",r.call(this,t,c,b));l.append(i)}}});d.register("donut",k.extend(!0,{},d.defaults.pie),function(a){a.innerRadius||
(a.innerRadius=0.5*a.radius);d.graphers.pie.call(this,a)});d.register("line",{delimiter:",",fill:"#c6d9fd",height:16,min:0,stroke:"#4d89f9",strokeWidth:1,width:32},function(a){var b=this.values();1==b.length&&b.push(b[0]);for(var e=g.max.apply(g,a.max==v?b:b.concat(a.max)),c=g.min.apply(g,a.min==v?b:b.concat(a.min)),d=this.prepare(a.width,a.height),l=a.strokeWidth,h=d.width(),j=d.height()-l,k=e-c,e=this.x=function(a){return a*(h/(b.length-1))},q=this.y=function(a){var b=j;k&&(b-=(a-c)/k*j);return b+
l/2},r=q(g.max(c,0)),f=[0,r],m=0;m<b.length;m++)f.push(e(m),q(b[m]));f.push(h,r);d.append(p("polygon",{fill:a.fill,points:f.join(" ")}));l&&d.append(p("polyline",{fill:"transparent",points:f.slice(2,f.length-2).join(" "),stroke:a.stroke,"stroke-width":l,"stroke-linecap":"square"}))});d.register("bar",{delimiter:",",fill:["#4D89F9"],height:16,min:0,padding:0.1,width:32},function(a){for(var b=this.values(),e=g.max.apply(g,a.max==v?b:b.concat(a.max)),c=g.min.apply(g,a.min==v?b:b.concat(a.min)),d=this.prepare(a.width,
a.height),l=d.width(),h=d.height(),j=e-c,a=a.padding,k=this.fill(),q=this.x=function(a){return a*l/b.length},r=this.y=function(a){return h-(j?(a-c)/j*h:1)},f=0;f<b.length;f++){var m=q(f+a),t=q(f+1-a)-m,i=b[f],o=r(i),n=o,u;j?0>i?n=r(g.min(e,0)):o=r(g.max(c,0)):u=1;u=o-n;0==u&&(u=1,0<e&&j&&n--);d.append(p("rect",{fill:k.call(this,i,f,b),x:m,y:n,width:t,height:u}))}})})(jQuery,document,Math);
